let selectedTier = 0.01;
let playerWallet = null;

function selectTier(amount) {
  selectedTier = amount;
  document.getElementById("status").innerText = `🎯 Selected Tier: ${amount} SOL`;
}

async function connectWallet() {
  if (window.solana && window.solana.isPhantom) {
    try {
      const resp = await window.solana.connect();
      playerWallet = resp.publicKey.toString();
      document.getElementById("status").innerText = "✅ Connected: " + playerWallet.slice(0, 8) + "...";
    } catch (err) {
      document.getElementById("status").innerText = "❌ Wallet not connected.";
    }
  } else {
    alert("Install Phantom Wallet to continue.");
  }
}

async function enterMatch() {
  if (!playerWallet) {
    alert("Connect wallet first.");
    return;
  }

  document.getElementById("status").innerText = `🔄 Sending ${selectedTier} SOL...`;
  document.getElementById("result").innerText = "";

  // THIS WILL BE REPLACED with contract logic:
  setTimeout(() => {
    const didWin = Math.random() > 0.5;

    if (didWin) {
      document.getElementById("result").innerText = `🔥 You won ${selectedTier * 0.95} SOL!`;
    } else {
      document.getElementById("result").innerText = "💀 You lost. Try again!";
    }

    document.getElementById("status").innerText = "✔️ Match Complete";
  }, 2500);
}
